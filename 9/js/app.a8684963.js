(function(t){function e(e){for(var n,o,s=e[0],c=e[1],l=e[2],h=0,p=[];h<s.length;h++)o=s[h],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,s=1;s<r.length;s++){var c=r[s];0!==i[c]&&(n=!1)}n&&(a.splice(e--,1),t=o(o.s=r[0]))}return t}var n={},i={app:0},a=[];function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var n=r("85ec"),i=r.n(n);i.a},"1dd9":function(t,e,r){t.exports=r.p+"img/140.bb80550e.png"},"56d7":function(t,e,r){"use strict";r.r(e);var n=r("2b0e"),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app"},[""===t.src?r("section",{staticClass:"helper"},[t._m(0),r("input",{ref:"control",staticClass:"control",attrs:{type:"file",title:""},on:{change:t.upload}})]):t._e(),r("section",{directives:[{name:"show",rawName:"v-show",value:t.src,expression:"src"}],staticClass:"wrap"},[r("a",{staticClass:"button",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.save(e)}}},[t._v("保存图片")]),r("a",{staticClass:"button clear",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.clear(e)}}},[t._v("clear")]),r("div",{ref:"ctx",staticClass:"context",style:t.boxCSSText})])])},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"tip"},[t._v("拖拽文件/点击上传图片， "),r("br"),t._v("生成 9 宫格图 ")])}],o=r("21a6"),s=r("c4e3"),c=r.n(s),l=r("1dd9"),u=r.n(l);function h(t,e,r,n){return e=n/(r/t),{w:t,h:e,ratio:r/t}}function p({w:t,h:e,ratio:r}){let n=[],i=3,a=0;for(let o=0;o<i;++o){let s=o*(e/i);for(let c=0;c<i;++c){let l=c*(t/i);n.push({row:o,col:c,grid:i,offset:a,x:l+c*a,y:s+o*a,px:-l,py:-s,w:t/i,h:e/i,rx:l*r,ry:s*r})}}return n}function d(t,e,r,n){return n.map(n=>{let i=document.createElement("canvas"),[a,o]=[e/n.grid,r/n.grid];i.width=a,i.height=o;let s=i.getContext("2d");return s.drawImage(t,n.rx,n.ry,a,o,0,0,a,o),i})}function f(t){return new Promise((e,r)=>{let n=URL.createObjectURL(t),i=new Image,a={image:i,src:n};i.onload=()=>{a.nw=i.naturalWidth,a.nh=i.naturalHeight,e(a)},i.onerror=t=>{r(t)},i.src=n})}var g={data(){const t=600,e=600;return{src:u.a,items:[],width:Math.min(.9*window.innerWidth,t),height:e}},computed:{boxCSSText(){return`width: ${this.width}px; height: ${this.height}px`}},methods:{clear(){this.src=""},save(){let t=new c.a,e=this.$refs.ctx,r=e.querySelectorAll("canvas"),n=0,i=t=>{t.generateAsync({type:"blob"}).then(t=>{this.download(t)})};r.forEach((e,r)=>{e.toBlob(e=>{t.file(r+1+".jpg",e),n++,9===n&&i(t)},"image/jpeg",1)})},download(t){Object(o["saveAs"])(t,"images.zip")},async handle(t){let e=await f(t);this.create(e)},create(t){this.src=t.src;let e=h(this.width,this.height,t.nw,t.nh);this.width=e.w,this.height=e.h;let r=p(e),n=5;this.items=r.map(t=>({...t,x:t.x+n*t.col,y:t.y+n*t.row}));let i=this.$refs.ctx;i&&(i.innerHTML="");let a=d(t.image,t.nw,t.nh,r);a.forEach((t,e)=>{let n=r[e],a=5,o=document.createElement("img");o.src=t.toDataURL(),t.style.cssText=o.style.cssText=`position: absolute; left: ${n.x+a*n.col}px; top: ${n.y+a*n.row}px; width: ${n.w}px; height: ${n.h}px;`,i&&(i.appendChild(t),i.appendChild(o))})},async upload(t){let e=t.target.files;e.length&&this.handle(e[0])},init(){let t=new Image;t.onload=()=>{this.create({image:t,nw:t.naturalWidth,nh:t.naturalHeight,src:this.src})},t.src=this.src}},created(){document.addEventListener("dragover",t=>{t.preventDefault()}),document.addEventListener("drop",t=>{t.preventDefault();let e=t.dataTransfer;if(e&&e.files){let t=e.files,r=t[0];0===r.type.indexOf("image/")&&this.handle(r)}}),this.src&&this.init()}},w=g,v=(r("034f"),r("2877")),m=Object(v["a"])(w,i,a,!1,null,null,null),x=m.exports;n["a"].config.productionTip=!1,new n["a"]({render:t=>t(x)}).$mount("#app")},"85ec":function(t,e,r){}});
//# sourceMappingURL=app.a8684963.js.map